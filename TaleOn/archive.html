<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Game Archive - TaleOn</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            orbitron: ['Orbitron', 'sans-serif'],
            inter: ['Inter', 'sans-serif']
          }
        }
      }
    }
  </script>
</head>
<body class="bg-[#0a0a0a] text-white font-inter text-center">

  <div class="max-w-[900px] mx-auto p-5">
    <!-- Title -->
    <h1 class="font-orbitron text-[2.5rem] tracking-[2px] text-[#00c3ff]" 
        style="text-shadow:0 0 10px #00c3ff,0 0 20px #00c3ff;">
      Game <span class="text-[#ff006f]" style="text-shadow:0 0 10px #ff006f,0 0 20px #ff006f;">Archive</span>
    </h1>

    <!-- Subtitle -->
    <p class="text-[#ccc] italic mb-5">Relive your wins, your losses, and the chaos in between.</p>

    <!-- Filters -->
    <div class="mb-6">
      <button onclick="filterStories('all')" 
              class="font-orbitron text-sm px-4 py-2 m-1 rounded-md bg-[#00c3ff] text-black transition duration-300 hover:shadow-[0_0_15px_#00c3ff,0_0_25px_#00c3ff]">
        All
      </button>
      <button onclick="filterStories('WIN')" 
              class="font-orbitron text-sm px-4 py-2 m-1 rounded-md bg-[#00c3ff] text-black transition duration-300 hover:shadow-[0_0_15px_#00c3ff,0_0_25px_#00c3ff]">
        Wins
      </button>
      <button onclick="filterStories('LOSE')" 
              class="font-orbitron text-sm px-4 py-2 m-1 rounded-md bg-[#00c3ff] text-black transition duration-300 hover:shadow-[0_0_15px_#00c3ff,0_0_25px_#00c3ff]">
        Losses
      </button>
    </div>

    <!-- Outer Blue Glowing Container -->
    <div id="archiveListWrapper" 
         class="bg-white/5 p-4 rounded-lg border border-[#00c3ff] shadow-[0_0_10px_#00c3ff] max-h-[500px] overflow-y-auto">
      <!-- Archive List -->
      <div id="archiveList" class="space-y-4 text-left"></div>
    </div>

    <!-- Home Button -->
    <div class="mt-8">
      <button onclick="goHome()" 
              class="font-orbitron text-base px-5 py-2 rounded-md bg-[#ff006f] text-white transition duration-300 hover:shadow-[0_0_15px_#ff006f,0_0_25px_#ff006f]">
        Back to Home
      </button>
    </div>
  </div>

  <script>
    // Mock archive data (replace with DB data later)
    let archives = JSON.parse(localStorage.getItem("archives")) || [
      {
        id: 1,
        date: "2025-08-14",
        verdict: "WIN",
        story: [
          { player: "Player_1", text: "Once upon a time..." },
          { player: "AI_Buddy", text: "A ghost appeared and laughed..." }
        ]
      },
      {
        id: 2,
        date: "2025-08-12",
        verdict: "LOSE",
        story: [
          { player: "Player_2", text: "We went to Mars..." },
          { player: "AI_Buddy", text: "But forgot to bring oxygen." }
        ]
      }
    ];

    function renderStories(list) {
      const container = document.getElementById("archiveList");
      container.innerHTML = "";

      if (list.length === 0) {
        container.innerHTML = `<p class="text-[#ccc] italic">No matching games found.</p>`;
        return;
      }

      list.forEach(game => {
        let wrapper = document.createElement("div");
        wrapper.className = `p-4 rounded-lg border bg-white/5 transition duration-300 
          ${game.verdict === "WIN" ? "border-[#00ff9f] shadow-[0_0_10px_#00ff9f]" : "border-[#ff003c] shadow-[0_0_10px_#ff003c]"}`;

        // Header
        let header = document.createElement("div");
        header.className = "flex justify-between mb-2";
        header.innerHTML = `
          <span class="text-sm text-[#ccc]">#${game.id} â€” ${game.date}</span>
          <span class="font-bold ${game.verdict === "WIN" ? "text-[#00ff9f]" : "text-[#ff003c]"}">${game.verdict}</span>
        `;

        // Story
        let storyDiv = document.createElement("div");
        storyDiv.className = "bg-white/5 p-2 rounded-md text-sm max-h-[150px] overflow-y-auto";
        storyDiv.innerHTML = game.story.map(s => `<strong>${s.player}:</strong> ${s.text}`).join("<br>");

        wrapper.appendChild(header);
        wrapper.appendChild(storyDiv);
        container.appendChild(wrapper);
      });
    }

    function filterStories(type) {
      if (type === "all") {
        renderStories(archives);
      } else {
        renderStories(archives.filter(s => s.verdict === type));
      }
    }

    function goHome() {
      window.location.href = "landing.html";
    }

    // Initial render
    renderStories(archives);
  </script>
</body>
</html>
